CREATE TABLE CLIENTE
(
	CODIGO_CLIENTE INT PRIMARY KEY NOT NULL,
	NOME VARCHAR (50) NOT NULL
);

CREATE TABLE CLIENTE_PF
(
	CODIGO_CLIENTE INT NOT NULL,
	CPF CHAR (14) PRIMARY KEY NOT NULL,
	RG CHAR (9) NOT NULL,
	DATA_NASCIMENTO DATE NOT NULL,
	SEXO CHAR(1) NOT NULL,
	FOREIGN KEY (CODIGO_CLIENTE) REFERENCES CLIENTE (CODIGO_CLIENTE)
);


CREATE TABLE CLIENTE_PJ
(
	CODIGO_CLIENTE INT NOT NULL,
	CNPJ VARCHAR (14) PRIMARY KEY NOT NULL,
	INSC_ESTADUAL VARCHAR (20) NOT NULL,
	NOME_RESPONSAVEL VARCHAR (50) NOT NULL,
	FOREIGN KEY (CODIGO_CLIENTE) REFERENCES CLIENTE (CODIGO_CLIENTE)
);

CREATE TABLE TELEFONE_CLIENTE
(
	ID_TELEFONE INT PRIMARY KEY NOT NULL,
	CODIGO_CLIENTE INT NOT NULL,
	TEL_RESIDENCIAL VARCHAR (20) NOT NULL,
	TEL_COMERCIAL VARCHAR (20) NOT NULL,
	CELULAR VARCHAR (20) NOT NULL,
	FOREIGN KEY (CODIGO_CLIENTE) REFERENCES CLIENTE (CODIGO_CLIENTE)
);

CREATE TABLE PRODUTO
(
	CODIGO_PRODUTO INT PRIMARY KEY NOT NULL,
	PRECO_CUSTO DECIMAL (8,2) NOT NULL,
	PRECO_VENDA DECIMAL (8,2) NOT NULL,
	QTD_ESTOQUE INT NOT NULL,
	QTD_MINIMA INT NOT NULL,
	TIPO VARCHAR (10) NOT NULL,
	DESCRICAO VARCHAR (100) NOT NULL
);

CREATE TABLE FUNCIONARIO
(
	CODIGO_FUNCIONARIO INT PRIMARY KEY NOT NULL,
	NOME VARCHAR (30) NOT NULL,
	TELEFONE VARCHAR (20) NOT NULL,
	CONTATO VARCHAR (20) NOT NULL,
	FUNCAO VARCHAR (20) NOT NULL,
	DEPARTAMENTO VARCHAR (20) NOT NULL
);

CREATE TABLE ENDERECO_CLIENTE
(
	ID_ENDERECO INT PRIMARY KEY NOT NULL,
	CODIGO_CLIENTE INT NOT NULL,
	CEP CHAR (8) NOT NULL,
	LOGRADOURO VARCHAR (10) NOT NULL,
	NUM_LOGRADOURO INT NOT NULL,
	BAIRRO VARCHAR (50) NOT NULL,
	CIDADE VARCHAR (50) NOT NULL,
	ESTADO CHAR (2) NOT NULL,
	PAIS VARCHAR (30) NOT NULL,
	FOREIGN KEY (CODIGO_CLIENTE) REFERENCES CLIENTE (CODIGO_CLIENTE)
);

CREATE TABLE ENDERECO_FUNCIONARIO
(
	ID_ENDERECO INT PRIMARY KEY NOT NULL,
	CODIGO_FUNCIONARIO INT NOT NULL,
	CEP CHAR (8) NOT NULL,
	LOGRADOURO VARCHAR (10) NOT NULL,
	NUM_LOGRADOURO INT NOT NULL,
	BAIRRO VARCHAR (50) NOT NULL,
	CIDADE VARCHAR (50) NOT NULL,
	ESTADO CHAR (2) NOT NULL,
	PAIS VARCHAR (30) NOT NULL,
	FOREIGN KEY (CODIGO_FUNCIONARIO) REFERENCES FUNCIONARIO (CODIGO_FUNCIONARIO)
);

CREATE TABLE VENDA
(
	NUMERO_VENDA INT PRIMARY KEY NOT NULL,
	CODIGO_CLIENTE INT NOT NULL,
	CODIGO_FUNCIONARIO INT NOT NULL,
	DATA_VENDA DATETIME NOT NULL,
	VALOR_VENDA DECIMAL (8,2) NOT NULL,
	CONDICAO_PAGAMENTO VARCHAR (20) NOT NULL,
	FOREIGN KEY (CODIGO_CLIENTE) REFERENCES CLIENTE (CODIGO_CLIENTE),
	FOREIGN KEY (CODIGO_FUNCIONARIO) REFERENCES FUNCIONARIO (CODIGO_FUNCIONARIO)
);


CREATE TABLE ITENS_VENDA
(
	NUMERO_VENDA INT NOT NULL,
	CODIGO_PRODUTO INT NOT NULL,
	PRIMARY KEY (NUMERO_VENDA, CODIGO_PRODUTO),
	FOREIGN KEY (NUMERO_VENDA) REFERENCES VENDA (NUMERO_VENDA),
	FOREIGN KEY (CODIGO_PRODUTO) REFERENCES PRODUTO (CODIGO_PRODUTO),
	QTD_ITENS INT NOT NULL
);

--Criando cliente - Pessoa Fisica
INSERT INTO CLIENTE (CODIGO_CLIENTE, NOME)
VALUES (1, 'Alvira')
SELECT * FROM CLIENTE
INSERT INTO CLIENTE_PF (CPF, RG, DATA_NASCIMENTO, SEXO, CODIGO_CLIENTE)
VALUES ('62965853065', '464250766', '2002-01-23', 'F', 1)
SELECT * FROM CLIENTE_PF
INSERT INTO ENDERECO_CLIENTE (ID_ENDERECO, CODIGO_CLIENTE, CEP, LOGRADOURO, NUM_LOGRADOURO, BAIRRO, CIDADE, ESTADO, PAIS)
VALUES (1, 1, '12345678', 'Casa', 123, 'Jardim Santa Clara', 'Araraquara', 'SP', 'Brasil')
SELECT * FROM ENDERECO_CLIENTE
INSERT INTO TELEFONE_CLIENTE (ID_TELEFONE, CODIGO_CLIENTE, TEL_RESIDENCIAL, TEL_COMERCIAL, CELULAR)
VALUES (0001, 1, '12345635', '36925814', '(14)99145682')
SELECT * FROM TELEFONE_CLIENTE
--Produtos Comprados
INSERT INTO PRODUTO (CODIGO_PRODUTO, PRECO_CUSTO, PRECO_VENDA, QTD_ESTOQUE, QTD_MINIMA, TIPO, DESCRICAO)
VALUES (0001,100.36, 60.15, 80, 10, 'Acessório', 'Bateria: Canon')
INSERT INTO PRODUTO (CODIGO_PRODUTO, PRECO_CUSTO, PRECO_VENDA, QTD_ESTOQUE, QTD_MINIMA, TIPO, DESCRICAO)
VALUES (0002,80.36, 37.10, 200, 10, 'Limpeza ', 'Panos de Microfibra')
INSERT INTO PRODUTO (CODIGO_PRODUTO, PRECO_CUSTO, PRECO_VENDA, QTD_ESTOQUE, QTD_MINIMA, TIPO, DESCRICAO)
VALUES (0003,100.36, 52.12, 200, 30, 'Som', 'Microfone: Microfone de Lapela')
SELECT * FROM PRODUTO
--Funcionarios responsaveis pela venda e atendimento
INSERT INTO FUNCIONARIO (CODIGO_FUNCIONARIO, NOME, TELEFONE, CONTATO, FUNCAO, DEPARTAMENTO)
VALUES (0001, 'Cleber Ribeiro Souza Silva', '(16)12345678', 'Cleber', 'Recepcionista', 'Marketing')
INSERT INTO ENDERECO_FUNCIONARIO (ID_ENDERECO, CEP, LOGRADOURO, NUM_LOGRADOURO, BAIRRO, CIDADE, ESTADO, PAIS, CODIGO_FUNCIONARIO)
VALUES (0001, '14785296', 'Casa', 456, 'Folhas Verdes', 'Matão', 'SP', 'Brasil', 0001)
INSERT INTO FUNCIONARIO (CODIGO_FUNCIONARIO, NOME, TELEFONE, CONTATO, FUNCAO, DEPARTAMENTO)
VALUES (0002, 'Martha Damares Zanil', '(17)98745678', 'Martha', 'Caixa', 'Operacional')
INSERT INTO ENDERECO_FUNCIONARIO (ID_ENDERECO, CEP, LOGRADOURO, NUM_LOGRADOURO, BAIRRO, CIDADE, ESTADO, PAIS, CODIGO_FUNCIONARIO)
VALUES (0002, '17885456', 'Casa', 456, 'Ariranha', 'Bota-Fogo', 'SP', 'Brasil', 0002)
SELECT * FROM FUNCIONARIO ORDER BY CODIGO_FUNCIONARIO ASC
SELECT * FROM ENDERECO_FUNCIONARIO ORDER BY CODIGO_FUNCIONARIO ASC
--Venda
INSERT INTO VENDA (NUMERO_VENDA, CODIGO_CLIENTE, CODIGO_FUNCIONARIO, DATA_VENDA, VALOR_VENDA, CONDICAO_PAGAMENTO)
VALUES (0001, 1, 1, '2024-05-20', 60.15+(4*37.10)+52.12, 'Cartão - Débito')
SELECT * FROM VENDA
INSERT INTO ITENS_VENDA (NUMERO_VENDA, CODIGO_PRODUTO, QTD_ITENS)
VALUES (0001, 0001, 1)
INSERT INTO ITENS_VENDA (NUMERO_VENDA, CODIGO_PRODUTO, QTD_ITENS)
VALUES (0001, 0002, 4)
INSERT INTO ITENS_VENDA (NUMERO_VENDA, CODIGO_PRODUTO, QTD_ITENS)
VALUES (0001, 0003, 1)
SELECT * FROM ITENS_VENDA ORDER BY CODIGO_PRODUTO ASC

--Criando Cliente - Pessoa Fisica
INSERT INTO CLIENTE (CODIGO_CLIENTE, NOME)
VALUES (2, 'Paulo')
SELECT * FROM CLIENTE
INSERT INTO CLIENTE_PF (CPF, RG, DATA_NASCIMENTO, SEXO, CODIGO_CLIENTE)
VALUES ('34965851265', '12350766', '1980-10-01', 'M', 2)
SELECT * FROM CLIENTE_PF ORDER BY CODIGO_CLIENTE ASC
INSERT INTO ENDERECO_CLIENTE (ID_ENDERECO, CODIGO_CLIENTE, CEP, LOGRADOURO, NUM_LOGRADOURO, BAIRRO, CIDADE, ESTADO, PAIS)
VALUES (2, 2, '01234567', 'Casa', 852, 'Selmi Dei', 'Araraquara', 'SP', 'Brasil')
SELECT * FROM ENDERECO_CLIENTE
INSERT INTO TELEFONE_CLIENTE (ID_TELEFONE, CODIGO_CLIENTE, TEL_RESIDENCIAL, TEL_COMERCIAL, CELULAR)
VALUES (0002, 2, '35685691', '45875863', '(16)99185421')
SELECT * FROM TELEFONE_CLIENTE
--Produtos Comprados
INSERT INTO PRODUTO (CODIGO_PRODUTO, PRECO_CUSTO, PRECO_VENDA, QTD_ESTOQUE, QTD_MINIMA, TIPO, DESCRICAO)
VALUES (0004,70.36, 42.36, 80, 10, 'Câmeras', 'Canon EOS')
INSERT INTO PRODUTO (CODIGO_PRODUTO, PRECO_CUSTO, PRECO_VENDA, QTD_ESTOQUE, QTD_MINIMA, TIPO, DESCRICAO)
VALUES (0005,60.36, 46.10, 200, 10, 'Tripé', 'Joby GorillaPod')
INSERT INTO PRODUTO (CODIGO_PRODUTO, PRECO_CUSTO, PRECO_VENDA, QTD_ESTOQUE, QTD_MINIMA, TIPO, DESCRICAO)
VALUES (0006,61.36, 40.5, 400, 10, 'Lentes', 'Lentes Zoom: 70-200mm f/2.8')
SELECT * FROM PRODUTO
--Funcionarios responsaveis pela venda e atendimento
INSERT INTO FUNCIONARIO (CODIGO_FUNCIONARIO, NOME, TELEFONE, CONTATO, FUNCAO, DEPARTAMENTO)
VALUES (0003, 'Clovis Ribeiro Souza Silva', '(16)12345679', 'Clovis', 'Guarda', 'Segurança')
INSERT INTO ENDERECO_FUNCIONARIO (ID_ENDERECO, CEP, LOGRADOURO, NUM_LOGRADOURO, BAIRRO, CIDADE, ESTADO, PAIS, CODIGO_FUNCIONARIO)
VALUES (0003, '14785296', 'Casa', 456, 'Folhas Verdes', 'Matão', 'SP', 'Brasil', 0003)
INSERT INTO FUNCIONARIO (CODIGO_FUNCIONARIO, NOME, TELEFONE, CONTATO, FUNCAO, DEPARTAMENTO)
VALUES (0004, 'Wilssom Faria Lima', '(16)52849478', 'Wilssom', 'Caixa', 'Operacional')
INSERT INTO ENDERECO_FUNCIONARIO (ID_ENDERECO, CEP, LOGRADOURO, NUM_LOGRADOURO, BAIRRO, CIDADE, ESTADO, PAIS, CODIGO_FUNCIONARIO)
VALUES (0004, '15688146', 'Apto', 86, 'Lagos Secos', 'Bota-Fogo', 'SP', 'Brasil', 0002)
SELECT * FROM FUNCIONARIO ORDER BY CODIGO_FUNCIONARIO ASC
SELECT * FROM ENDERECO_FUNCIONARIO ORDER BY CODIGO_FUNCIONARIO ASC
--Venda
INSERT INTO VENDA (NUMERO_VENDA, CODIGO_CLIENTE, CODIGO_FUNCIONARIO, DATA_VENDA, VALOR_VENDA, CONDICAO_PAGAMENTO)
VALUES (0002, 2, 4, '2024-05-20', 42.36+46.10+40.5, 'Cartão - Crédito')
SELECT * FROM VENDA
INSERT INTO ITENS_VENDA (NUMERO_VENDA, CODIGO_PRODUTO, QTD_ITENS)
VALUES (0002, 0004, 1)
INSERT INTO ITENS_VENDA (NUMERO_VENDA, CODIGO_PRODUTO, QTD_ITENS)
VALUES (0002, 0005, 1)
INSERT INTO ITENS_VENDA (NUMERO_VENDA, CODIGO_PRODUTO, QTD_ITENS)
VALUES (0002, 0006, 1)
SELECT * FROM ITENS_VENDA ORDER BY CODIGO_PRODUTO ASC

--Testes
SELECT * from CLIENTE ORDER BY CODIGO_CLIENTE ASC
SELECT * FROM CLIENTE_PF ORDER BY CODIGO_CLIENTE ASC
SELECT * FROM ENDERECO_CLIENTE ORDER BY CODIGO_CLIENTE ASC
SELECT * FROM TELEFONE_CLIENTE ORDER BY CODIGO_CLIENTE ASC
SELECT * FROM FUNCIONARIO ORDER BY CODIGO_FUNCIONARIO ASC
SELECT * FROM ENDERECO_FUNCIONARIO ORDER BY CODIGO_FUNCIONARIO ASC
SELECT * FROM VENDA ORDER BY CODIGO_CLIENTE ASC
SELECT * FROM ITENS_VENDA ORDER BY CODIGO_PRODUTO ASC

--Criando Cliente - Pessoa Juridica
INSERT INTO CLIENTE (CODIGO_CLIENTE, NOME)
VALUES (3, 'IT Solutions')
SELECT * FROM CLIENTE
INSERT INTO CLIENTE_PJ(CNPJ, INSC_ESTADUAL, CODIGO_CLIENTE, NOME_RESPONSAVEL)
VALUES ('12345678912345', '458712369', 3, 'Fabiana Barros')
SELECT * FROM CLIENTE_PJ
INSERT INTO ENDERECO_CLIENTE (ID_ENDERECO, CODIGO_CLIENTE, CEP, LOGRADOURO, NUM_LOGRADOURO, BAIRRO, CIDADE, ESTADO, PAIS)
VALUES (3, 3,'12345456', 'Apto', 97, 'Torneira', 'Diamantina', 'MG', 'Brasil')
SELECT * FROM ENDERECO_CLIENTE
INSERT INTO TELEFONE_CLIENTE (ID_TELEFONE, CODIGO_CLIENTE, TEL_RESIDENCIAL, TEL_COMERCIAL, CELULAR)
VALUES (3, 3, '45687542', '85421693','(71)99185647')
SELECT * FROM TELEFONE_CLIENTE
--Produtos Comprados
INSERT INTO PRODUTO (CODIGO_PRODUTO, PRECO_CUSTO, PRECO_VENDA, QTD_ESTOQUE, QTD_MINIMA, TIPO, DESCRICAO)
VALUES (0007,70.36, 61.45, 50, 10, 'Câmeras', 'Nikon D series')
INSERT INTO PRODUTO (CODIGO_PRODUTO, PRECO_CUSTO, PRECO_VENDA, QTD_ESTOQUE, QTD_MINIMA, TIPO, DESCRICAO)
VALUES (0008,84.86, 72.58, 70, 10, 'Iluminação', 'Flash: Speedlite Godox')
INSERT INTO PRODUTO (CODIGO_PRODUTO, PRECO_CUSTO, PRECO_VENDA, QTD_ESTOQUE, QTD_MINIMA, TIPO, DESCRICAO)
VALUES (0009,81.92, 68.21, 70, 10, 'Iluminação', 'LED Panels')
SELECT * FROM PRODUTO
--Funcionarios responsaveis pela venda e atendimento
INSERT INTO FUNCIONARIO (CODIGO_FUNCIONARIO, NOME, TELEFONE, CONTATO, FUNCAO, DEPARTAMENTO)
VALUES (0003, 'Clovis Ribeiro Souza Silva', '(16)12345679', 'Clovis', 'Guarda', 'Segurança')
INSERT INTO ENDERECO_FUNCIONARIO (ID_ENDERECO, CEP, LOGRADOURO, NUM_LOGRADOURO, BAIRRO, CIDADE, ESTADO, PAIS, CODIGO_FUNCIONARIO)
VALUES (0003, '14785296', 'Casa', 456, 'Folhas Verdes', 'Matão', 'SP', 'Brasil', 0003)
INSERT INTO FUNCIONARIO (CODIGO_FUNCIONARIO, NOME, TELEFONE, CONTATO, FUNCAO, DEPARTAMENTO)
VALUES (0003, 'Martha Damares Zanil', '(17)98745678', 'Martha', 'Caixa', 'Operacional')
INSERT INTO ENDERECO_FUNCIONARIO (ID_ENDERECO, CEP, LOGRADOURO, NUM_LOGRADOURO, BAIRRO, CIDADE, ESTADO, PAIS, CODIGO_FUNCIONARIO)
VALUES (0003, '17885456', 'Casa', 456, 'Ariranha', 'Bota-Fogo', 'SP', 'Brasil', 0002)
SELECT * FROM FUNCIONARIO ORDER BY CODIGO_FUNCIONARIO ASC
SELECT * FROM ENDERECO_FUNCIONARIO ORDER BY CODIGO_FUNCIONARIO ASC
--Venda
INSERT INTO VENDA (NUMERO_VENDA, CODIGO_CLIENTE, CODIGO_FUNCIONARIO, DATA_VENDA, VALOR_VENDA, CONDICAO_PAGAMENTO)
VALUES (0003, 3, 3, '2024-05-20', (4*61.45)+(3*72.58)+(4*68.21), 'Cartão - Débito')
SELECT * FROM VENDA
INSERT INTO ITENS_VENDA (NUMERO_VENDA, CODIGO_PRODUTO, QTD_ITENS)
VALUES (0003, 0007, 4)
INSERT INTO ITENS_VENDA (NUMERO_VENDA, CODIGO_PRODUTO, QTD_ITENS)
VALUES (0003, 0008, 3)
INSERT INTO ITENS_VENDA (NUMERO_VENDA, CODIGO_PRODUTO, QTD_ITENS)
VALUES (0003, 0009, 4)
SELECT * FROM ITENS_VENDA ORDER BY CODIGO_PRODUTO ASC

--Testes
SELECT * from CLIENTE ORDER BY CODIGO_CLIENTE ASC
SELECT * FROM CLIENTE_PJ ORDER BY CODIGO_CLIENTE ASC
SELECT * FROM ENDERECO_CLIENTE ORDER BY CODIGO_CLIENTE ASC
SELECT * FROM FUNCIONARIO ORDER BY CODIGO_FUNCIONARIO ASC
SELECT * FROM ENDERECO_FUNCIONARIO ORDER BY CODIGO_FUNCIONARIO ASC
SELECT * FROM VENDA ORDER BY CODIGO_CLIENTE ASC
SELECT * FROM ITENS_VENDA ORDER BY CODIGO_PRODUTO ASC